# MTS Design Weekend - Карты предсказаний

Интерактивное мини-приложение для Telegram, которое позволяет получать уникальные метафорические предсказания на основе дизайнерских карт.

## Функциональность

- Интеграция с Telegram как мини-приложение (Telegram WebApp)
- Загрузка фотографий карт с предпросмотром
- Распознавание QR-кодов на картах для точной идентификации
- Генерация уникальных метафорических предсказаний
- Возможность поделиться предсказанием
- Совместимость с мобильными устройствами
- Опциональная интеграция с OpenAI API для генерации уникальных предсказаний

## Технологии

- HTML5, CSS3, JavaScript (ванильный, без фреймворков)
- Telegram Bot API и WebApp API
- jsQR для распознавания QR-кодов
- Web Share API для функции "Поделиться"
- OpenAI API (опционально, для продакшена)

## Как использовать

### 1. Создайте Telegram бота

1. Откройте [@BotFather](https://t.me/botfather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания нового бота
4. Сохраните токен бота, который вы получите

### 2. Настройте WebApp в BotFather

1. Отправьте команду `/mybots` в BotFather
2. Выберите вашего бота
3. Выберите "Bot Settings" -> "Menu Button" или "Menu Commands"
4. Установите webAppUrl на URL вашего приложения (например, https://yourusername.github.io/mts-design-cards/)

### 3. Разместите приложение на GitHub Pages

1. Создайте репозиторий на GitHub
2. Загрузите все файлы проекта в репозиторий
3. Перейдите в настройки репозитория -> Pages
4. Включите GitHub Pages для ветки main
5. После публикации вы получите URL вашего приложения

### 4. Создание QR-кодов для карт (опционально)

Для точной идентификации карт вы можете создать QR-коды с идентификаторами карт:

1. Используйте любой онлайн-генератор QR-кодов
2. Создайте QR-код для каждого ID карты (design001-design026)
3. Распечатайте QR-коды и прикрепите их к физическим картам
4. Приложение будет автоматически распознавать карты по QR-коду

### 5. Интеграция с OpenAI API (опционально)

Для использования OpenAI API вместо примеров предсказаний:

1. Зарегистрируйтесь на [OpenAI Platform](https://platform.openai.com/)
2. Создайте API ключ
3. В файле `js/app.js` установите переменную `isDemoMode` в `false`
4. Замените значение `apiKey` в функции `generatePrediction()` на ваш реальный ключ

## Структура файлов

```
mts-design-cards/
│
├── index.html          # Главная страница
├── css/
│   └── styles.css      # Стили приложения
├── js/
│   └── app.js          # JavaScript логика
├── img/                # Изображения (если нужны)
├── .gitignore          # Игнорируемые файлы
└── .env.example        # Пример переменных окружения
```

## Карты и их метафоры

В приложении используется 26 карт с уникальными метафорами. Каждая карта имеет свой идентификатор (design001-design026) и метафору, которая используется как основа для генерации предсказаний.

## Пример использования

1. Пользователь открывает бота в Telegram
2. Нажимает на кнопку меню для запуска мини-приложения
3. Вводит свой вопрос в поле
4. Фотографирует карту (с QR-кодом) и загружает её
5. Получает уникальное метафорическое предсказание
6. Может поделиться предсказанием или получить новое

## Функции приложения

### Распознавание QR-кодов

Приложение может распознавать QR-коды на фото карт для точного определения их идентификаторов. Если QR-код не обнаружен, приложение выбирает случайную карту.

### Предпросмотр изображений

При загрузке фото карты пользователь видит предпросмотр изображения перед отправкой.

### Поделиться предсказанием

Приложение позволяет поделиться полученным предсказанием через:
- Web Share API (в поддерживаемых браузерах)
- Отправку в чат Telegram (если открыто в Telegram WebApp)
- Копирование в буфер обмена (как запасной вариант)

## Пример интеграции с ботом

Для отображения кнопки WebApp в боте используйте следующий код:

```javascript
const { Telegraf } = require('telegraf');
const bot = new Telegraf('YOUR_BOT_TOKEN');

bot.start((ctx) => {
  ctx.reply('Добро пожаловать! Используйте кнопку ниже, чтобы получить предсказание.', {
    reply_markup: {
      keyboard: [
        [{
          text: 'Открыть карты предсказаний',
          web_app: { url: 'https://yourusername.github.io/mts-design-cards/' }
        }]
      ],
      resize_keyboard: true
    }
  });
});

bot.launch();
```

## Настройка для локальной разработки

1. Клонируйте репозиторий
2. Откройте папку проекта с помощью любого HTTP-сервера (например, используя расширение Live Server в VS Code)
3. Внесите необходимые изменения
4. Проверьте работу в браузере
5. Загрузите изменения в GitHub для обновления GitHub Pages 