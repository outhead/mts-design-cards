/**
 * Предсказания для карт MTS Design Weekend
 * В этом файле содержатся данные предсказаний и функции для их отображения
 */

// Новые предсказания (резервные, если API не работает)
const defaultPredictions = {
  'УЕДИНЕНИЕ': [
    "Медитация очистит разум для новых идей",
    "Парящая высота поможет увидеть проект со стороны",
    "Уединение даст силы для творческого прорыва"
  ],
  'АНАЛИТИК': [
    "Двойная проверка данных выявит подводные камни",
    "Постоянный анализ приведет к точным решениям",
    "Многозадачность откроет новые возможности"
  ],
  'НАЧАЛО': [
    "Совместная работа станет фундаментом успеха",
    "Амбициозные идеи позволят быстрее достичь вершины",
    "Упорная работа будет вскоре вознаграждена"
  ],
  'АРТ-ДИРЕКТОР': [
    "Энергия творческих потоком придаст вам силы",
    "Проявление лидерских качеств приведет к цели",
    "Контроль над ситуацией позволит сделать рывок вперед"
  ],
  'РЕШИМОСТЬ': [
    "Смелость в принятии решений откроет новые горизонты",
    "Доверие интуиции приведет к успеху",
    "Преодоление страха ускорит приближение перемен"
  ],
  'ПОВЫШЕНИЕ': [
    "Стремление к новым высотам ускорит карьерный рост", 
    "Групповая работа укрепит ваши позиции",
    "Новые высоты покоряются смелым"
  ],
  'ДВИЖЕНИЕ': [
    "Баланс между креативом и практичностью приведет к цели",
    "Уравновешенность позволит найти золотую середину в проектах",
    "Движение вперед – ключ к росту"
  ],
  'ФОРТУНА': [
    "Успех цикличен, продолжайте движение", 
    "Неожиданные повороты ведут к новым возможностям",
    "Верьте в удачу, но работайте над проектами"
  ],
  'ПУТЬ': [
    "Вы двигаетесь в правильном направлении",
    "Следуйте за своим вдохновением",
    "Путь к успеху освещен ясностью цели"
  ],
  'КРЕАТИВ': [
    "Близость к свету дарит новые возможности", 
    "Солнечный свет питает творческие идеи",
    "Движение вверх – залог профессионального роста"
  ],
  'ДОСТИЖЕНИЕ': [
    "Успех в карьере благодаря командной работе",
    "Преодоление непреодолимых препятствий приведет к цели",
    "Лидерские качества помогут обрести желаемое"
  ],
  'ЗНАЧИМОСТЬ': [
    "Осознание важности своей работы придаст сил",
    "Признание достижений и уважение коллег не за горами",
    "Уверенность в себе может сдвинуть горы"
  ],
  'ТВОРЕЦ': [
    "Творческий подход благоприятен для решения задач",
    "Инновации и оригинальные идеи вносят вклад в развитие",
    "Творческое сотрудничество с другими поможет в достижении целей"
  ],
  'ВОЛШЕБНИК': [
    "Умение преодолевать трудности творит чудеса",
    "Использование воображения и интуиции приблизит успех",
    "Развитие гибкости мышления приведёт к позитивным изменениям"
  ],
  'ВЫБОР': [
    "Принятие решений должно опираться на логику, а не эмоции",
    "Важно учитывать все возможные последствия выбора",
    "Стремление к балансу между личным и профессиональным должно быть в приоритете"
  ],
  'ВЕЛИЧИЕ': [
    "Достижение новых высот благодаря опоре на свои силы",
    "Уверенность в себе приведёт к поставленным целям",
    "Осознание своей значимости поможет выйти на новый уровень"
  ],
  'ПАРТНЕР': [
    "Сотрудничество с другими – залог создания успешных проектов",
    "Обмен опытом и знаниями выведет на новые высоты",
    "Развитие навыков коммуникации и умение работать в команде даст свои плоды"
  ],
  'ВДОХНОВЕНИЕ': [
    "Каждая деталь в окружении может быть источником вдохновения",
    "Черпать идеи в повседневном – залог успеха",
    "Источник вдохновения всегда рядом, просто будьте внимательны"
  ]
};

// Функция инициализации Telegram WebApp (заглушка)
function initTelegramWebApp() {
  console.log('TelegramWebApp не используется в этой версии');
  return {
    MainButton: {
      setText: () => {},
      hide: () => {},
      show: () => {},
      onClick: () => {}
    },
    ready: () => {},
    expand: () => {},
    onEvent: () => {}
  };
}

// Заглушка для Analytics
if (typeof Analytics === 'undefined') {
  window.Analytics = {
    trackEvent: (event, data) => {
      console.log('Аналитика:', event, data);
    },
    consentGiven: true
  };
}

// Функция для генерации предсказания на основе карты и вопроса
function generatePrediction(question, cardId) {
  return new Promise((resolve) => {
    console.log('Генерация предсказания...');
    
    // Просто выбираем случайную карту из имеющихся
    const cardNames = Object.keys(defaultPredictions);
    const randomCardName = cardNames[Math.floor(Math.random() * cardNames.length)];
    
    // Получаем случайное предсказание из набора для выбранной карты
    const predictions = defaultPredictions[randomCardName];
    const randomPredictionIndex = Math.floor(Math.random() * predictions.length);
    const randomPrediction = predictions[randomPredictionIndex];
    
    // Добавляем еще одно случайное предсказание для разнообразия
    const secondCardName = cardNames[Math.floor(Math.random() * cardNames.length)];
    const secondPredictions = defaultPredictions[secondCardName];
    const secondRandomIndex = Math.floor(Math.random() * secondPredictions.length);
    const secondRandomPrediction = secondPredictions[secondRandomIndex];
    
    // Форматируем предсказание с красивым оформлением
    const formattedPrediction = `${randomPrediction}\n\n${secondRandomPrediction}`;
    
    console.log('Выбрана карта:', randomCardName);
    console.log('Предсказание:', formattedPrediction.substring(0, 50) + '...');
    
    // Иммитируем небольшую задержку для реалистичности
    setTimeout(() => {
      resolve(formattedPrediction);
    }, 800);
  });
}

// Экспортируем функцию для использования в других файлах
window.generatePrediction = generatePrediction; 